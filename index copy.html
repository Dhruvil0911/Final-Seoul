<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seasoul Skin Analyzer</title>
<style>
  body {
    font-family: "Inter", sans-serif;
    background: #f8f9fb;
    text-align: center;
    padding: 50px 10px;
  }
  h2 {
    font-size: 2em;
    margin-bottom: 20px;
  }
  input[type="file"] {
    margin-bottom: 20px;
  }
  #preview {
    width: 200px;
    height: auto;
    border-radius: 12px;
    margin-top: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .btn {
    background-color: #0078ff;
    color: white;
    font-size: 16px;
    border: none;
    padding: 10px 22px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 20px;
  }
  .btn:hover {
    background-color: #005fd1;
  }
  pre {
    background: white;
    text-align: left;
    width: 80%;
    margin: 30px auto;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    overflow-x: auto;
    font-family: monospace;
    white-space: pre-wrap;
  }
  .loading {
    font-style: italic;
    color: gray;
  }
</style>
</head>
<body>

<h2>Seasoul Skin Analyzer</h2>

<input type="file" id="fileInput" accept="image/*">
<br>
<img id="preview" hidden>
<br>
<button class="btn" onclick="uploadImage()">Analyze</button>

<pre id="output">Waiting for result...</pre>

<script>
const backendURL = "http://127.0.0.1:8000/analyze-skin"; // change this to your backend

fileInput.onchange = e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    const img = document.getElementById("preview");
    img.src = ev.target.result;
    img.hidden = false;
  };
  reader.readAsDataURL(file);
};

async function uploadImage() {
  const file = document.getElementById("fileInput").files[0];
  if (!file) {
    alert("Please choose an image first!");
    return;
  }

  const output = document.getElementById("output");
  output.textContent = "Analyzing image... please wait ‚è≥";
  output.classList.add("loading");

  const formData = new FormData();
  formData.append("file", file);

  try {
    const res = await fetch(backendURL, { method: "POST", body: formData });
    const data = await res.json();
    output.classList.remove("loading");
    output.textContent = JSON.stringify(data, null, 2);
  } catch (err) {
    output.textContent = "Error: " + err.message;
    output.classList.remove("loading");
  }
}
</script>
</body>
</html>
